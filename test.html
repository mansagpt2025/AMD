<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Supabase</title>
</head>
<body style="font-family: Arial; padding: 20px;">
    <h1>ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Supabase</h1>
    
    <div id="result" style="margin: 20px 0; padding: 15px; border: 1px solid #ccc;"></div>
    
    <button onclick="testConnection()" style="padding: 10px 20px; background: #0070f3; color: white; border: none; cursor: pointer;">
        Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
    </button>
    
    <button onclick="testAuth()" style="padding: 10px 20px; background: #10b981; color: white; border: none; cursor: pointer; margin-left: 10px;">
        Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    </button>
    
    <button onclick="testTables()" style="padding: 10px 20px; background: #f59e0b; color: white; border: none; cursor: pointer; margin-left: 10px;">
        Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
    </button>

    <script>
        const SUPABASE_URL = 'https://YOUR_PROJECT.supabase.co';
        const SUPABASE_KEY = 'YOUR_ANON_KEY';
        
        async function testConnection() {
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/`, {
                    headers: { 'apikey': SUPABASE_KEY }
                });
                
                if (response.ok) {
                    document.getElementById('result').innerHTML = 
                        '<p style="color: green;">âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Supabase ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!</p>' +
                        '<p>URL: ' + SUPABASE_URL + '</p>' +
                        '<p>Status: ' + response.status + '</p>';
                } else {
                    document.getElementById('result').innerHTML = 
                        '<p style="color: red;">âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ' + response.status + '</p>' +
                        '<p>ØªØ£ÙƒØ¯ Ù…Ù†: <br>' +
                        '1. URL ØµØ­ÙŠØ­ <br>' +
                        '2. KEY ØµØ­ÙŠØ­ <br>' +
                        '3. CORS Ù…ÙØ¹Ù„ ÙÙŠ Supabase</p>';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">âŒ Ø®Ø·Ø£: ' + error.message + '</p>';
            }
        }
        
        async function testAuth() {
            try {
                const response = await fetch(`${SUPABASE_URL}/auth/v1/settings`, {
                    headers: { 'apikey': SUPABASE_KEY }
                });
                
                const data = await response.json();
                document.getElementById('result').innerHTML = 
                    '<p style="color: green;">âœ… Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ØªØ¹Ù…Ù„!</p>' +
                    '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©: ' + error.message + '</p>';
            }
        }
        
        async function testTables() {
            try {
                // Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ profiles
                const profilesRes = await fetch(`${SUPABASE_URL}/rest/v1/profiles?select=count`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ wallets
                const walletsRes = await fetch(`${SUPABASE_URL}/rest/v1/wallets?select=count`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });
                
                let result = '<h3>Ù†ØªÙŠØ¬Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„:</h3>';
                
                if (profilesRes.ok) {
                    result += '<p style="color: green;">âœ… Ø¬Ø¯ÙˆÙ„ profiles Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙŠØ¹Ù…Ù„</p>';
                } else {
                    result += '<p style="color: red;">âŒ Ø¬Ø¯ÙˆÙ„ profiles ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ÙÙŠÙ‡ Ù…Ø´ÙƒÙ„Ø©</p>';
                }
                
                if (walletsRes.ok) {
                    result += '<p style="color: green;">âœ… Ø¬Ø¯ÙˆÙ„ wallets Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙŠØ¹Ù…Ù„</p>';
                } else {
                    result += '<p style="color: red;">âŒ Ø¬Ø¯ÙˆÙ„ wallets ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ÙÙŠÙ‡ Ù…Ø´ÙƒÙ„Ø©</p>';
                }
                
                document.getElementById('result').innerHTML = result;
                
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>